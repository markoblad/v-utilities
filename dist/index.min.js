"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _=require("lodash"),moment=require("moment"),mathjs=require("mathjs"),VUtilities=function(){function u(){}return u.makeString=function(r){return null==r?"":""+r},u.coerceToString=function(t){return _.some(["[object Undefined]","[object Null]"],function(r){return Object.prototype.toString.call(t)===r})?"":t.toString()},u.reverse=function(r){return r.split("").reverse().join("")},u.isBlank=function(r){return null==r||null==r||("string"==typeof r||"number"==typeof r?/^\s*$/.test(r.toString()):u.isArray(r)?0===r.length:u.isObject(r)?0===Object.getOwnPropertyNames(r).length:/^\s*$/.test(u.makeString(r)))},u.isObject=function(r){return"[object Object]"===Object.prototype.toString.call(r)},u.isArray=function(r){return"[object Array]"===Object.prototype.toString.call(r)},u.isFunction=function(r){return!!r&&"[object Function]"==={}.toString.call(r)},u.isDate=function(r){return"[object Date]"===Object.prototype.toString.call(r)},u.isString=function(r){return"string"==typeof r},u.isNumeric=function(r){return!u.isObject(r)&&!u.isArray(r)&&!isNaN(parseFloat(r))&&isFinite(r)},u.isBigNumber=function(r){return"BigNumber"===mathjs.typeOf(r)},u.isTrue=function(r){if(null==r)return!1;return _.includes(["yes","y","true","t","1","on"],r.toString().toLowerCase())},u.isFalse=function(r){if(null==r)return!1;return _.includes(["no","n","false","f","0","off"],r.toString().toLowerCase())},u.isTrueOrFalse=function(r){return u.isTrue(r)||u.isFalse(r)},u.eachSlice=function(r,t,e){void 0===t&&(t=1);for(var n=0,i=r.length;n<i;n+=t)e(r.slice(n,n+t))},u.arraySum=function(r){return r&&u.isArray(r)?_.reduce(r,function(r,t){var e=typeof t;return!t||"string"!=e&&"number"!=e||!isFinite(t)&&t!==1/0?r:r+parseFloat(t)},0):0},u.bigArraySum=function(r){return r&&u.isArray(r)?_.reduce(r,function(r,t){var e=mathjs.typeOf(t);return!t||"BigNumber"!==e&&"string"!==e&&"number"!==e||!isFinite(t)&&"Infinity"!==t.toString()?r:mathjs.add(r,"string"===e?u.parseBigOrZero(t):t)},mathjs.bignumber(0)):mathjs.bignumber(0)},u.arrayItemCounts=function(r){return _.reduce(r||[],function(r,t){return r[t]=r[t]||0,r[t]+=1,r},{})},u.arraySort=function(r){return void 0===r&&(r=[]),_.map(r,function(r){return"Infinity"===r?1/0:"-Infinity"===r?-1/0:r}).sort(function(r,t){return r-t})},u.arrayClosest=function(n,r){if(void 0===r&&(r=[]),!u.isNumeric(n)||!u.isArray(r)||0===r.length)return null;n=parseFloat(n.toString());var i=parseFloat(r[0].toString()),o=Math.abs(n-i);return r.forEach(function(r){if(!u.isBlank(r)){var t=parseFloat(r.toString()),e=Math.abs(n-t);u.isNumeric(r)&&e<o&&(o=e,i=t)}}),i},u.arrayClosestBelowOrAbove=function(e,r,t,n){if(void 0===r&&(r=[]),!u.isNumeric(e)||!u.isArray(r)||0===r.length)return null;e=parseFloat(e.toString());var i=_.chain(r).uniq().compact().map(function(r){return parseFloat(r.toString())}).value();i=u.arraySort(i),n||(i=_.reverse(i));var o,s=null;return o=t?n?function(r,t){return t<=r}:function(r,t){return r<=t}:n?function(r,t){return t<r}:function(r,t){return r<t},_.find(i,function(r){var t=u.isNumeric(r)&&o(r,e);return t&&(s=r),t}),s},u.arrayClosestBelow=function(r,t){return void 0===t&&(t=[]),u.arrayClosestBelowOrAbove(r,t,!1,!1)},u.arrayClosestAbove=function(r,t){return void 0===t&&(t=[]),u.arrayClosestBelowOrAbove(r,t,!1,!0)},u.arrayEqualOrClosestBelow=function(r,t){return void 0===t&&(t=[]),u.arrayClosestBelowOrAbove(r,t,!0,!1)},u.arrayEqualOrClosestAbove=function(r,t){return void 0===t&&(t=[]),u.arrayClosestBelowOrAbove(r,t,!0,!0)},u.hasRangeOverlap=function(r,t,e){return void 0===e&&(e={}),u.isTrue(e.sort)&&(r=r.sort(),t=t.sort()),r&&t&&2===r.length&&2===t.length&&(u.isTrue(e.strict)?r[0]!==r[1]&&(r[0]<t[1]&&r[1]>t[0]||t[0]<r[1]&&t[1]>r[0]):r[0]<=t[1]&&t[0]<=r[1])},u.rangeToArray=function(r,t){return Array.from(Array(t+1).keys()).slice(r,t+1)},u.filterHashes=function(r,t){return void 0===r&&(r=[]),void 0===t&&(t={}),_.filter(r,function(e){return _.every(t,function(r,t){return u.isFunction(r)?r(e[t]):e[t]===r})})},u.enumDate=function(r){return u.isBlank(r)?null:"number"==typeof r?r:"string"==typeof r||"object"==typeof r?u.isNumeric(r)?parseInt(moment.utc(parseFloat(r)).format("x"),10):parseInt(moment.utc(r,["YYYY-MM-DD HH:mm:ss Z","dddd MMMM DD, YYYY HH:mm:ss Z","ddd MMMM DD, YYYY HH:mm:ss Z","MMMM DD, YYYY HH:mm:ss Z","MMMM DD YYYY HH:mm:ss Z","MMMM D, YYYY HH:mm:ss Z","MMMM D YYYY HH:mm:ss Z","MMM D, YYYY HH:mm:ss Z","MMM D YYYY HH:mm:ss Z","ddd MMM D YYYY HH:mm:ss Z","YYYY-MM-DD HH:mm:ss","MMMM DD, YYYY HH:mm:ss","dddd MMMM DD, YYYY HH:mm:ss","ddd MMMM DD, YYYY HH:mm:ss","MMMM DD YYYY HH:mm:ss","MMMM D, YYYY HH:mm:ss","MMMM D YYYY HH:mm:ss","MMM D, YYYY HH:mm:ss","MMM D YYYY HH:mm:ss","ddd MMM D YYYY HH:mm:ss","YYYY-MM-DD HH:mm Z","dddd MMMM DD, YYYY HH:mm Z","ddd MMMM DD, YYYY HH:mm Z","MMMM DD, YYYY HH:mm Z","MMMM DD YYYY HH:mm Z","MMMM D, YYYY HH:mm Z","MMMM D YYYY HH:mm Z","MMM D, YYYY HH:mm Z","MMM D YYYY HH:mm Z","ddd MMM D YYYY HH:mm Z","LLLL","LLL","LL","L","YYYY-MM-DD","MM-DD-YYYY","DD-MM-YYYY","YYYY-M-D","M-D-YYYY","D-M-YYYY","MMMM DD, YYYY","MMMM D, YYYY","MMM D, YYYY","MMMM DD YYYY","MMMM D YYYY","MMM D YYYY","MM-DD-YY","DD-MM-YY","M-D-YY","D-M-YY"]).format("x"),10):(console.log("typeof obj",typeof r),r instanceof moment?r.utc().format("x"):parseInt(moment.utc(r).format("x"),10))},u.newUTCDateTimeStamp=function(){return u.enumDate(moment())},u.convertDateToStartOfDayStamp=function(r){return null==r?r:u.enumDate(moment.utc(u.enumDate(r)||0).startOf("day"))},u.periodsToSortedStamps=function(r){return void 0===r&&(r=[]),_.chain(r||[]).map(function(r){return u.enumDate(r)}).compact().uniq().sortBy().value()},u.isLeapYear=function(r){return(r=parseInt(r,10))%4==0&&r%100!=0||r%400==0},u.parseIntOrZero=function(r){return r=u.isBigNumber(r=r||0)?mathjs.number(r):r,u.isNumeric(r)?parseInt(r):0},u.parseFloatOrZero=function(r){return r=u.isBigNumber(r=r||0)?mathjs.number(r):r,u.isNumeric(r)?parseFloat(r):0},u.parseBigOrZero=function(r){return u.isBigNumber(r=r||0)?r:mathjs.bignumber(u.isNumeric(r)?r:0)},u.parseBigOrOne=function(r){return u.isBigNumber(r=0===r?r:r||"")?r:mathjs.bignumber(u.isNumeric(r)?r:1)},u}();exports.VUtilities=VUtilities,exports.default=VUtilities;
